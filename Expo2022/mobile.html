<!DOCTYPE html>
<html lang="en">

<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MAGI EXPO 2022</title>
  <!-- Google Font -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Jost:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
    rel="stylesheet">
  <!-- Stylesheet -->
  <link rel="stylesheet" href="style.css" />
  <link
    href="https://static1.squarespace.com/static/5f641f58c0c0c9743de8d1ff/t/635cb997c1c7b62bd3da3fd5/1667021207584/favicon.png"
    rel="icon" sizes="32x32">
  <link
    href="https://static1.squarespace.com/static/5f641f58c0c0c9743de8d1ff/t/635cbaaedeb2fd442072f9e5/1667021488540/custom_icon.png"
    rel="apple-touch-icon">

  <!-- Scripts -->
</head>

<body>
  <div id="preloader">
  </div>

  <header>
    <div id="magi-logo">
      <img
        src="https://static1.squarespace.com/static/5f641f58c0c0c9743de8d1ff/t/635c94014fd8302e386fe900/1667011585748/expo_logo%402x.png"
        alt="MAGIEXPO2022">
    </div>
    <div id="social-media-icons">
      <a href="https://www.facebook.com/RMIT.MAGI.EXPO/"><img
          src="https://static1.squarespace.com/static/5f641f58c0c0c9743de8d1ff/t/635c94f8deb2fd44207092cf/1667011832418/fb.png"
          alt="Facebook" target="_blank"></a>
      <a href="https://instagram.com/rmit.magistudio?igshid=YmMyMTA2M2Y="><img
          src="https://static1.squarespace.com/static/5f641f58c0c0c9743de8d1ff/t/635c94fe7d58c0223ff1f294/1667011838102/ig.png"
          alt="Instagram" target="_blank"></a>
      <a href="https://twitter.com/RMITMAGIEXPO"><img
          src="https://static1.squarespace.com/static/5f641f58c0c0c9743de8d1ff/t/635c95017272f54fa9f2baa6/1667011841852/twitter.png"
          alt="Twitter" target="_blank"></a>
    </div>
  </header>

  <div id="headline">
    <div>
      <h4>Explore the wondrous creations of the students of</h4>
      <h1>Masters of <span style="color:#F6DA72">Animation</span>, <span style="color:#6275B8">Games</span> and <span
          style="color:#F7665A">Interactivity</span></h1>
      <a href="https://youtu.be/mqGgmnFHPLQ" id="stream-button" style="background-color:#FF0000" target="_blank"><span><img
            src="https://static1.squarespace.com/static/5f641f58c0c0c9743de8d1ff/t/636daa1b99b3dd0a6596175d/1668131355614/youtube.png"></span>Watch
        Stream @ YouTube</a>
      <!-- <a href="" id="stream-button" style="background-color:#4454c7"><span><img
            src="https://static1.squarespace.com/static/5f641f58c0c0c9743de8d1ff/t/635cad51ad70df3f1cccb904/1667018065309/discord.png"></span>Watch
        Stream @ Discord</a>
      <a href="" id="stream-button" style="background-color: #5560de;"><span><img
            src="https://static1.squarespace.com/static/5f641f58c0c0c9743de8d1ff/t/635cad4cbc4fe47402c609c8/1667018060895/gather.png"></span>Party
        @ Gather Town</a> -->
      <a href="https://app.vectary.com/viewer-ar/v1/?model=2e33b843-41bc-46ce-8e10-91f2ab4b4616&domain=ar&backLink=https://app.vectary.com/p/1PBHY1awOK2ywsO1yQxTCo"
        id="stream-button" style="background-color: #F69B86;"><span><img
            src="https://static1.squarespace.com/static/5f641f58c0c0c9743de8d1ff/t/635cb3e56d550e3cad596cf9/1667019749816/ar.png"></span>Engage
        AR!</a>
    </div>
    <!-- <div><iframe src="https://app.vectary.com/p/1PBHY1awOK2ywsO1yQxTCo" frameborder="0" width="100%" height="400"
        id="vectary"></iframe></div>
 -->
    <div>
      <img id="magi-2022-mascot" width="100%"
        src="https://static1.squarespace.com/static/5f641f58c0c0c9743de8d1ff/t/635cb686bf6485031a1b7332/1667020424422/magi-2022-mascot.png">
    </div>

  </div>

  <div id="overlay">
    <div id="close-area">
    </div>
  </div>

  <div class="wrapper">
    <div id="search-container">
      <input type="search" id="search-input" placeholder="Search student name here.." />
      <button id="search">Search</button>
    </div>

    <section id="buttons">
      <button class="button-value button-all button-active" onclick="filterCategory('all')">All</button>
      <button class="button-value button-ani" onclick="filterCategory('Animation')">
        Animation
      </button>
      <button class="button-value button-game" onclick="filterCategory('Games')">
        Games
      </button>
      <button class="button-value button-int" onclick="filterCategory('Interactivity')">
        Interactivity
      </button>
      <!-- <button class="button-value" onclick="filterCategory('Graduate')">
        Graduate
      </button> -->
    </section>

    <section class="work-container">
      <div id="works"></div>
    </section>
  </div>

  <footer>
    <div>
      Copyright Â© 2020 RMIT University | <a href="https://www.rmit.edu.au/utilities/terms" target="_blank">Terms</a> |
      <a href="https://www.rmit.edu.au/utilities/privacy" target="_blank">Privacy</a> | <a
        href="https://www.rmit.edu.au/utilities/accessibility" target="_blank">Accessibility</a> | <a
        href="https://www.rmit.edu.au/utilities/website-feedback" target="_blank">Website feedback</a> | <a
        href="https://www.rmit.edu.au/utilities/complaints" target="_blank">Complaints</a> | ABN 49 781 030 034 | CRICOS
      provider number: 00122A | RTO Code: 3046 | <a href="https://www.open.edu.au/online-courses/rmit-university"
        target="_blank">Open Universities Australia</a>
    </div>
    <div>
      <a id="footer-content_logo" href="https://www.rmit.edu.au/" target="_blank">
        <img
          src="https://static1.squarespace.com/static/5f641f58c0c0c9743de8d1ff/t/5f9568d4aa018b57d3ecaa64/1603627220028/rmit-logo.png"
          alt="RMIT University">
      </a>
    </div>
  </footer>

  <!-- Script -->
  <script src="./data.js"></script>
  <script>
    for (let i of works.data) {
      //Create Card
      let card = document.createElement("a");
      card.setAttribute("data-modal-target", "#" + i.modalName);
      card.setAttribute("class", "open-modal");
      //Card should have category and should stay hidden initially
      card.classList.add("card", i.category);
      //heroImage div
      let imgContainer = document.createElement("div");
      imgContainer.classList.add("heroImage-container");
      //img tag
      let heroImage = document.createElement("img");
      heroImage.setAttribute("data-src", i.heroImage);
      imgContainer.appendChild(heroImage);
      card.appendChild(imgContainer);
      //container
      let container = document.createElement("div");
      container.classList.add("container");
      //work title
      let name = document.createElement("h3");
      name.innerText = i.workTitle.toUpperCase();
      container.appendChild(name);
      //author
      let author = document.createElement("h4");
      card.classList.add("search-result");
      author.innerText = i.author.replace(
        /\w\S*/g,
        function (txt) {
          return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();
        }
      );
      let authorPreferredName = document.createElement("span");
      authorPreferredName.innerText = " (" + i.preferredName + ")".replace(
        /\w\S*/g,
        function (txt) {
          return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();
        }
      );

      author.appendChild(authorPreferredName);
      container.appendChild(author);

      // check if preferred name exists
      var authorPreferredNameCheck = i.hasOwnProperty('preferredName');
      if (authorPreferredNameCheck) { } else {
        authorPreferredName.setAttribute("class", "hidden");
      }


      card.appendChild(container);
      document.getElementById("works").appendChild(card);

      // create modal section
      const modalSection = document.createElement("section");
      modalSection.setAttribute("id", i.modalName);
      modalSection.setAttribute("class", i.category + "border");
      modalSection.classList.add("modal");
      // create author introduction holder div
      const authorDetailHolder = document.createElement("div")
      authorDetailHolder.setAttribute("id", "author-detail");
      // create a div holding x and head shot
      const headShotHolder = document.createElement("div");
      // create a div holding close button
      const closeButton = document.createElement("a");
      closeButton.classList.add("close-button");
      // draw a cross sign
      const crossSign = document.createElement("strong");
      crossSign.innerHTML = "&times;";
      // include the cross sign to close button
      closeButton.appendChild(crossSign);
      // create the head shot img
      const headImage = document.createElement("img");
      headImage.setAttribute("id", "head-shot");
      headImage.setAttribute("data-src", i.headImage);
      headImage.setAttribute("alt", i.preferredName);
      // include the x and head shot img to author detail div
      headShotHolder.appendChild(closeButton);
      headShotHolder.appendChild(headImage);

      // create author bio div
      const authorBioHolder = document.createElement("div");
      authorBioHolder.setAttribute("id", "author-bio");
      // create author name
      const authorName = document.createElement("h2");
      authorName.setAttribute("id", "author");
      // match author
      authorName.innerText = i.author;
      // create preferred name span
      const preferredName = document.createElement("em");
      preferredName.setAttribute("id", "preferred-name");
      // match preferred name
      preferredName.innerText = " (" + i.preferredName + ")";
      // include preferred name into author
      authorName.appendChild(preferredName);
      // create graduate
      const graduate = document.createElement("span");
      graduate.innerText = "Graduate: " + i.graduate;
      // create student number
      const studNo = document.createElement("span");
      studNo.setAttribute("id", "student-number");
      // match student number
      studNo.innerText = i.studNo;
      // create a line break
      const lineBreak = document.createElement("p");
      // create personal site link
      const personalSite = document.createElement("a");
      personalSite.setAttribute("id", "social-media");
      personalSite.setAttribute("target", "_blank");
      personalSite.setAttribute("href", i.personalSite);
      // personalSite.innerText = "Website";
      // create personal website icon
      const personalSiteIcon = document.createElement("img");
      personalSiteIcon.setAttribute("id", "social-media-icons");
      personalSiteIcon.setAttribute("src", "https://static1.squarespace.com/static/5f641f58c0c0c9743de8d1ff/t/6360f40e24a1ae4f75a4099e/1667298318947/personalSite_author.png");
      // create Instagram link
      const instagram = document.createElement("a");
      instagram.setAttribute("id", "social-media");
      instagram.setAttribute("target", "_blank");
      instagram.setAttribute("href", i.instagram);
      // instagram.innerText = "Instagram";
      // create instagram icon
      const instagramIcon = document.createElement("img");
      instagramIcon.setAttribute("id", "social-media-icons");
      instagramIcon.setAttribute("src", "https://static1.squarespace.com/static/5f641f58c0c0c9743de8d1ff/t/6360f4261d399d27641f41d1/1667298342648/instagram_author.png");
      // create Facebook link
      const facebook = document.createElement("a");
      facebook.setAttribute("id", "social-media");
      facebook.setAttribute("target", "_blank");
      facebook.setAttribute("href", i.facebook);
      // facebook.innerText = "Facebook";
      // create facebook icon
      const facebookIcon = document.createElement("img");
      facebookIcon.setAttribute("id", "social-media-icons");
      facebookIcon.setAttribute("src", "https://static1.squarespace.com/static/5f641f58c0c0c9743de8d1ff/t/6360f43434338e670253e4eb/1667298356871/facebook_author.png");
      // create Twitter link
      const twitter = document.createElement("a");
      twitter.setAttribute("id", "social-media");
      twitter.setAttribute("target", "_blank");
      twitter.setAttribute("href", i.twitter);
      // twitter.innerText = "Twitter";
      // create twitter icon
      const twitterIcon = document.createElement("img");
      twitterIcon.setAttribute("id", "social-media-icons");
      twitterIcon.setAttribute("src", "https://static1.squarespace.com/static/5f641f58c0c0c9743de8d1ff/t/6360f4414792ed0d832ddf7e/1667298369540/twitter_author.png");
      // create YoutubePage link
      const youtubePage = document.createElement("a");
      youtubePage.setAttribute("id", "social-media");
      youtubePage.setAttribute("target", "_blank");
      youtubePage.setAttribute("href", i.youtubePage);
      // youtubePage.innerText = "YouTube";
      // create youtubepage icon
      const youtubePageIcon = document.createElement("img");
      youtubePageIcon.setAttribute("id", "social-media-icons");
      youtubePageIcon.setAttribute("src", "https://static1.squarespace.com/static/5f641f58c0c0c9743de8d1ff/t/6360f44e1d399d27641f4802/1667298382814/youtube_author.png");
      // create LinkedIn Link
      const linkedin = document.createElement("a");
      linkedin.setAttribute("id", "social-media");
      linkedin.setAttribute("target", "_blank");
      linkedin.setAttribute("href", i.linkedin);
      // linkedin.innerText = "LinkedIn";
      // create linkedin icon
      const linkedinIcon = document.createElement("img");
      linkedinIcon.setAttribute("id", "social-media-icons");
      linkedinIcon.setAttribute("src", "https://static1.squarespace.com/static/5f641f58c0c0c9743de8d1ff/t/6360f45aa69bb60c6523042e/1667298394232/linkedin_author.png");
      // create behance
      const behance = document.createElement("a");
      behance.setAttribute("id", "social-media");
      behance.setAttribute("target", "_blank");
      behance.setAttribute("href", i.behance);
      // behance.innerText = "Behance";
      // create behance icon
      const behanceIcon = document.createElement("img");
      behanceIcon.setAttribute("id", "social-media-icons");
      behanceIcon.setAttribute("src", "https://static1.squarespace.com/static/5f641f58c0c0c9743de8d1ff/t/6360f4657f89ac738b389064/1667298405366/behance_author.png");
      // create bilibili link
      const bilibili = document.createElement("a");
      bilibili.setAttribute("id", "social-media");
      bilibili.setAttribute("target", "_blank");
      bilibili.setAttribute("href", i.bilibili);
      // bilibili.innerText = "Bilibili";
      // create bilibili icon
      const bilibiliIcon = document.createElement("img");
      bilibiliIcon.setAttribute("id", "social-media-icons");
      bilibiliIcon.setAttribute("src", "https://static1.squarespace.com/static/5f641f58c0c0c9743de8d1ff/t/6360f46f3905a45d7f133c88/1667298415953/bilibili_author.png");
      // create tiktok link
      const tiktok = document.createElement("a");
      tiktok.setAttribute("id", "social-media");
      tiktok.setAttribute("target", "_blank");
      tiktok.setAttribute("href", i.tiktok);
      // tiktok.innerText = "TikTok";
      // create tiktok icon
      const tiktokIcon = document.createElement("img");
      tiktokIcon.setAttribute("id", "social-media-icons");
      tiktokIcon.setAttribute("src", "https://static1.squarespace.com/static/5f641f58c0c0c9743de8d1ff/t/6360f47b7f89ac738b389099/1667298427594/tiktok_author.png");

      // include social media icons
      personalSite.appendChild(personalSiteIcon);
      instagram.appendChild(instagramIcon);
      facebook.appendChild(facebookIcon);
      twitter.appendChild(twitterIcon);
      youtubePage.appendChild(youtubePageIcon);
      linkedin.appendChild(linkedinIcon);
      behance.appendChild(behanceIcon);
      bilibili.appendChild(bilibiliIcon);
      tiktok.appendChild(tiktokIcon);


      // check if preferred name has values
      var preferredNameCheck = i.hasOwnProperty('preferredName');
      if (preferredNameCheck) { } else {
        preferredName.setAttribute("class", "hidden");
      }

      // check if social media has values
      var personalSiteCheck = i.hasOwnProperty('personalSite');
      if (personalSiteCheck) { } else {
        personalSite.setAttribute("class", "hidden");
      }

      var instagramCheck = i.hasOwnProperty('instagram');
      if (instagramCheck) { } else {
        instagram.setAttribute("class", "hidden");
      }

      var facebookCheck = i.hasOwnProperty('facebook');
      if (facebookCheck) { } else {
        facebook.setAttribute("class", "hidden");
      }

      var twitterCheck = i.hasOwnProperty('twitter');
      if (twitterCheck) { } else {
        twitter.setAttribute("class", "hidden");
      }

      var youtubePageCheck = i.hasOwnProperty('youtubePage');
      if (youtubePageCheck) { } else {
        youtubePage.setAttribute("class", "hidden");
      }

      var linkedinCheck = i.hasOwnProperty('linkedin');
      if (linkedinCheck) { } else {
        linkedin.setAttribute("class", "hidden");
      }

      var behanceCheck = i.hasOwnProperty('behance');
      if (behanceCheck) { } else {
        behance.setAttribute("class", "hidden");
      }

      var bilibiliCheck = i.hasOwnProperty('bilibili');
      if (bilibiliCheck) { } else {
        bilibili.setAttribute("class", "hidden");
      }

      var tiktokCheck = i.hasOwnProperty('tiktok');
      if (tiktokCheck) { } else {
        tiktok.setAttribute("class", "hidden");
      }

      // create bio
      const bio = document.createElement("p");
      bio.setAttribute("id", "bio");
      // match bio
      bio.innerText = i.bio;
      // include all elements to author bio
      authorBioHolder.appendChild(authorName);
      authorBioHolder.appendChild(graduate);
      authorBioHolder.appendChild(studNo);
      authorBioHolder.appendChild(lineBreak);
      authorBioHolder.appendChild(personalSite);
      authorBioHolder.appendChild(instagram);
      authorBioHolder.appendChild(facebook);
      authorBioHolder.appendChild(twitter);
      authorBioHolder.appendChild(youtubePage);
      authorBioHolder.appendChild(linkedin);
      authorBioHolder.appendChild(behance);
      authorBioHolder.appendChild(bilibili);
      authorBioHolder.appendChild(tiktok);
      authorBioHolder.appendChild(bio);
      // include author bio holder to author detail holder
      authorDetailHolder.appendChild(headShotHolder);
      authorDetailHolder.appendChild(authorBioHolder);

      // create work detail holder
      const workDetailHolder = document.createElement("div");
      workDetailHolder.setAttribute("id", "work-detail");
      // create category
      const category = document.createElement("h4");
      category.setAttribute("id", "category");
      // match category
      category.innerText = i.category;
      // create work title
      const workTitle = document.createElement("h1");
      workTitle.setAttribute("id", "work-title");
      // match workTitle
      workTitle.innerText = i.workTitle;
      // create a video external link
      const youtube = document.createElement("a");
      youtube.setAttribute("id", "youtube-button");
      youtube.setAttribute("href", i.youtube);
      youtube.setAttribute("target", "_blank");
      youtube.innerText = "Watch " + i.workTitle;
      // match video iframe
      youtube.setAttribute("data-src", i.youtube);
      // create brief p
      const brief = document.createElement("p");
      brief.setAttribute("id", "brief");
      // match brief
      brief.innerText = i.brief;
      // create relevant image 1
      const relevantImageOne = document.createElement("img");
      relevantImageOne.setAttribute("data-src", i.relevantImageOne);
      // create relevant image 2
      const relevantImageTwo = document.createElement("img");
      relevantImageTwo.setAttribute("data-src", i.relevantImageTwo);
      // create relevant image 3
      const relevantImageThree = document.createElement("img");
      relevantImageThree.setAttribute("data-src", i.relevantImageThree);
      // create relevant image 4
      const relevantImageFour = document.createElement("img");
      relevantImageFour.setAttribute("data-src", i.relevantImageFour);
      // create relevant image 5
      const relevantImageFive = document.createElement("img");
      relevantImageFive.setAttribute("data-src", i.relevantImageFive);

      // check if relevant image exists
      var relevantImageOneCheck = i.hasOwnProperty('relevantImageOne');
      if (relevantImageOneCheck) { } else {
        relevantImageOne.setAttribute("class", "hidden");
      }

      var relevantImageTwoCheck = i.hasOwnProperty('relevantImageTwo');
      if (relevantImageTwoCheck) { } else {
        relevantImageTwo.setAttribute("class", "hidden");
      }

      var relevantImageThreeCheck = i.hasOwnProperty('relevantImageThree');
      if (relevantImageThreeCheck) { } else {
        relevantImageThree.setAttribute("class", "hidden");
      }

      var relevantImageFourCheck = i.hasOwnProperty('relevantImageFour');
      if (relevantImageFourCheck) { } else {
        relevantImageFour.setAttribute("class", "hidden");
      }

      var relevantImageFiveCheck = i.hasOwnProperty('relevantImageFive');
      if (relevantImageFiveCheck) { } else {
        relevantImageFive.setAttribute("class", "hidden");
      }

      // check if embed video link exists
      var youtubeCheck = i.hasOwnProperty('youtube');
      if (youtubeCheck) { } else {
        youtube.setAttribute("class", "hidden");
      }

      // include all elements to work detail div
      workDetailHolder.appendChild(category);
      workDetailHolder.appendChild(workTitle);
      workDetailHolder.appendChild(youtube);
      workDetailHolder.appendChild(brief);
      workDetailHolder.appendChild(relevantImageOne);
      workDetailHolder.appendChild(relevantImageTwo);
      workDetailHolder.appendChild(relevantImageThree);
      workDetailHolder.appendChild(relevantImageFour);
      workDetailHolder.appendChild(relevantImageFive);

      // include two holders to section
      modalSection.appendChild(authorDetailHolder);
      modalSection.appendChild(workDetailHolder);

      document.getElementById("overlay").appendChild(modalSection);

    }


    //parameter passed from button (Parameter same as category)
    function filterCategory(value) {
      //Button class code
      let buttons = document.querySelectorAll(".button-value");
      buttons.forEach((button) => {
        //check if value equals innerText
        if (value.toUpperCase() == button.innerText.toUpperCase()) {
          button.classList.add("button-active");
        } else {
          button.classList.remove("button-active");
        }
      });

      //select all cards
      let elements = document.querySelectorAll(".card");
      //loop through all cards
      elements.forEach((element) => {
        //display all cards on 'all' button click
        if (value == "all") {
          element.classList.remove("hide");
        } else {
          //Check if element contains category class
          if (element.classList.contains(value)) {
            //display element based on category
            element.classList.remove("hide");
          } else {
            //hide other elements
            element.classList.add("hide");
          }
        }
      });
    }

    //Search button click
    document.getElementById("search").addEventListener("click", () => {
      //initializations
      let searchInput = document.getElementById("search-input").value;
      let elements = document.querySelectorAll(".search-result");
      let cards = document.querySelectorAll(".card");

      //loop through all elements
      elements.forEach((element, index) => {
        //because it checks case as well, it unifies the search text's format with the target's format, and then check if text includes the search value
        if (element.innerText.includes(searchInput.replace(
          /\w\S*/g,
          function (txt) {
            return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();
          }
        ))) {
          //display matching card
          cards[index].classList.remove("hide");
        } else {
          //hide others
          cards[index].classList.add("hide");
        }
      });
    });

    //Initially display all works
    window.onload = () => {
      filterCategory("all");
    };
  </script>

  <script>
    // collect all data-modal-target elements
    const openModalButtons = document.querySelectorAll('[data-modal-target]')
    const closeModalButtons = document.querySelectorAll('.close-button')
    const overlay = document.getElementById('overlay')
    const closeArea = document.getElementById('close-area')
    const body = document.body


    openModalButtons.forEach(a => {
      a.addEventListener('click', () => {
        const modal = document.querySelector(a.dataset.modalTarget)
        openModal(modal)
      })
    })

    closeArea.addEventListener('click', () => {
      const modals = document.querySelectorAll('.modal.active')
      modals.forEach(modal => {
        closeModal(modal)
      })
    })

    closeModalButtons.forEach(a => {
      a.addEventListener('click', () => {
        const modal = a.closest('.modal')
        closeModal(modal)
      })
    })

    function openModal(modal) {
      if (modal == null) return
      modal.classList.add('active')
      overlay.classList.add('active')
      body.classList.add('active')
    }

    function closeModal(modal) {
      if (modal == null) return
      modal.classList.remove('active')
      overlay.classList.remove('active')
      body.classList.remove('active')
    }
  </script>

  <script>

    var loader = document.getElementById("preloader");

    window.addEventListener("load", function () {
      loader.style.display = "none";
    });

  </script>

  <script>
    const images = document.querySelectorAll("[data-src]");

    function preloadImage(img) {
      const src = img.getAttribute("data-src");
      if (!src) {
        return;
      }

      img.src = src;
    }

    const imgOptions = {
      threshold: 0,
      rootMargin: "0px 0px 700px 0px"
    };

    const imgObserver = new IntersectionObserver((entries, imgObserver) => {
      entries.forEach(entry => {
        if (!entry.isIntersecting) {
          return;
        } else {
          preloadImage(entry.target);
          imgObserver.unobserve(entry.target);
        }
      });
    }, imgOptions);

    images.forEach(image => {
      imgObserver.observe(image);
    })

  </script>
</body>

</html>